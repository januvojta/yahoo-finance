package cz.januvojt.yahoofinance.model

import cz.januvojt.yahoofinance.dto.FutureSummaryDTO
import kotlinx.datetime.Instant
import kotlinx.datetime.TimeZone

data class FutureSummary(
    val ask: Double? = null,
    val askSize: Int? = null,
    val averageDailyVolume10Day: Long? = null,
    val averageDailyVolume3Month: Long? = null,
    val bid: Double? = null,
    val bidSize: Int? = null,
    val contractSymbol: Boolean? = null,
    val currency: String? = null,
    val customPriceAlertConfidence: String? = null,
    val esgPopulated: Boolean? = null,
    val exchange: String? = null,
    val exchangeDataDelayedBy: Long? = null,
    val exchangeTimezoneName: TimeZone? = null,
    val expireDate: Instant? = null,
    val expireIsoDate: String? = null,
    val fiftyDayAverage: Double? = null,
    val fiftyDayAverageChange: Double? = null,
    val fiftyDayAverageChangePercent: Double? = null,
    val fiftyTwoWeekHighChange: Double? = null,
    val fiftyTwoWeekHighChangePercent: Double? = null,
    val fiftyTwoWeekLowChange: Double? = null,
    val fiftyTwoWeekLowChangePercent: Double? = null,
    val fiftyTwoWeekRange: Range? = null,
    val firstTradeDate: Instant? = null,
    val fullExchangeName: String? = null,
    val headSymbolAsString: String? = null,
    val language: String? = null,
    val market: String? = null,
    val marketState: String? = null,
    val openInterest: Int? = null,
    val priceHint: Int? = null,
    val quoteSourceName: String? = null,
    val quoteType: String? = null,
    val region: String? = null,
    val regularMarketChange: Double? = null,
    val regularMarketChangePercent: Double? = null,
    val regularMarketDayRange: Range? = null,
    val regularMarketOpen: Double? = null,
    val regularMarketPreviousClose: Double? = null,
    val regularMarketPrice: Double? = null,
    val regularMarketTime: Instant? = null,
    val regularMarketVolume: Long? = null,
    val shortName: String? = null,
    val sourceInterval: Int? = null,
    val symbol: String? = null,
    val tradeable: Boolean? = null,
    val triggerable: Boolean? = null,
    val twoHundredDayAverage: Double? = null,
    val twoHundredDayAverageChange: Double? = null,
    val twoHundredDayAverageChangePercent: Double? = null,
    val typeDisp: String? = null,
    val underlyingExchangeSymbol: String? = null,
    val underlyingSymbol: String? = null,
)

private const val milToSec = 1000

internal fun FutureSummaryDTO.toFutureSummary(): FutureSummary {
    return FutureSummary(
        this.ask,
        this.askSize,
        this.averageDailyVolume10Day,
        this.averageDailyVolume3Month,
        this.bid,
        this.bidSize,
        this.contractSymbol,
        this.currency,
        this.customPriceAlertConfidence,
        this.esgPopulated,
        this.exchange,
        this.exchangeDataDelayedBy,
        this.exchangeTimezoneName?.let { TimeZone.of(it) },
        this.expireDate?.let { Instant.fromEpochSeconds(it, milToSec) },
        this.expireIsoDate,
        this.fiftyDayAverage,
        this.fiftyDayAverageChange,
        this.fiftyDayAverageChangePercent,
        this.fiftyTwoWeekHighChange,
        this.fiftyTwoWeekHighChangePercent,
        this.fiftyTwoWeekLowChange,
        this.fiftyTwoWeekLowChangePercent,
        this.fiftyTwoWeekHigh?.let { this.fiftyTwoWeekLow?.let { it1 -> Range(it, it1) } },
        this.firstTradeDateMilliseconds?.let { Instant.fromEpochMilliseconds(it) },
        this.fullExchangeName,
        this.headSymbolAsString,
        this.language,
        this.market,
        this.marketState,
        this.openInterest,
        this.priceHint,
        this.quoteSourceName,
        this.quoteType,
        this.region,
        this.regularMarketChange,
        this.regularMarketChangePercent,
        this.regularMarketDayHigh?.let { this.regularMarketDayLow?.let { it1 -> Range(it, it1) } },
        this.regularMarketOpen,
        this.regularMarketPreviousClose,
        this.regularMarketPrice,
        this.regularMarketTime?.let { Instant.fromEpochSeconds(it, milToSec) },
        this.regularMarketVolume,
        this.shortName,
        this.sourceInterval,
        this.symbol,
        this.tradeable,
        this.triggerable,
        this.twoHundredDayAverage,
        this.twoHundredDayAverageChange,
        this.twoHundredDayAverageChangePercent,
        this.typeDisp,
        this.underlyingExchangeSymbol,
        this.underlyingSymbol,
    )
}